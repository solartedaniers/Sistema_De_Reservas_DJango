{% extends "base.html" %}
{% block title %}Calendario de Reservas{% endblock %}
{% block content %}
<h2 class="mb-4">Calendario de Reservas</h2>
<div id='calendar'></div>

<!-- FullCalendar CSS -->
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css' rel='stylesheet' />

<!-- FullCalendar JS -->
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/locales-all.global.min.js'></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');

    // Inserta los eventos como JSON válido
    var eventos = JSON.parse('{{ reservas_json|escapejs }}');

    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        locale: 'es',  // Esto activa el idioma español
        events: eventos,
        height: 600,
        headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,listWeek'
        },
        eventClick: function(info) {
            alert(
                info.event.title + '\n' +
                info.event.start.toLocaleDateString() +
                (info.event.extendedProps.espacio ? '\n' + info.event.extendedProps.espacio : '')
            );
        }
    });

    calendar.render();
});
</script>
{% endblock %}